:root{
  --bg:#0f1724; /* dark navy */
  --panel:#ffffff;
  --muted:#6b7280;
  --accent:#2563eb; /* primary blue */
  --danger:#ef4444;
  --glass: rgba(255,255,255,0.06);
}

/* Page layout */
.vc-page{
  background:var(--bg);
  min-height:100vh;
  color:#fff;
  display:flex;
  align-items:stretch;
}

.vc-container{
  display:grid;
  grid-template-columns: 300px 1fr 300px; /* left sidebar, stage, right inventory same width */
  gap:18px;
  width:100%;
  padding:20px;
  box-sizing:border-box;
  position:relative; /* for local popups */
  align-items:stretch; /* stretch side panels to match tallest (video stage) */
}

/* Sidebar (doctor / patient details) */
.vc-sidebar{
  background:var(--panel);
  color:#0b1220;
  border-radius:12px;
  padding:18px;
  box-shadow:0 6px 18px rgba(2,6,23,0.6);
  display:flex;
  flex-direction:column;
  gap:12px;
}

.vc-person{display:flex;gap:12px;align-items:center}
.vc-avatar{width:64px;height:64px;border-radius:12px;display:flex;align-items:center;justify-content:center;font-weight:700}
.vc-avatar-doctor{background:var(--accent);color:white;font-size:26px}
.vc-avatar-patient{background:linear-gradient(135deg,#10b981,#06b6d4);color:white;font-size:16px;border-radius:10px}
.vc-person-info{display:flex;flex-direction:column}
.vc-name{font-weight:700;font-size:16px}
.vc-meta{color:var(--muted);font-size:13px}
.vc-small{color:var(--muted);font-size:12px}
.vc-divider{height:1px;background:linear-gradient(90deg,#f3f4f6, #e5e7eb);opacity:0.4;border-radius:4px}

.vc-stats{margin-top:auto;font-size:13px;color:var(--muted)}
.vc-timer{font-weight:700;color:#111827;font-size:18px}
.vc-status{margin-top:6px}
.vc-langs{margin-top:6px}

/* Main stage */
.vc-main{display:flex;flex-direction:column;gap:12px}
.vc-main-header{display:flex;justify-content:space-between;align-items:center;color:white}
.vc-main-header h1{font-size:20px;margin:0}
.vc-actions{display:flex;gap:8px}

.vc-video-stage{position:relative;background:linear-gradient(180deg,#0b1220 0%, #0b1220 100%);border-radius:12px;overflow:hidden;display:flex;align-items:center;justify-content:center;min-height:60vh}
.vc-video-dummy{width:100%;height:100%;display:flex;align-items:center;justify-content:center;background:linear-gradient(180deg,rgba(37,99,235,0.06), rgba(2,6,23,0.2));}
.vc-dummy-overlay{display:flex;align-items:center;gap:18px;color:white;padding:28px}
.vc-dummy-avatar{width:120px;height:120px;border-radius:16px;background:rgba(255,255,255,0.06);display:flex;align-items:center;justify-content:center;font-size:48px;font-weight:700}
.vc-dummy-name{font-size:22px;font-weight:700}
.vc-dummy-specialty{color:rgba(255,255,255,0.85);margin-top:4px}
.vc-dummy-status{color:var(--accent);margin-top:8px}

/* mini self video */
.vc-mini-video{position:absolute;right:18px;top:18px;width:140px;background:rgba(255,255,255,0.04);backdrop-filter:blur(6px);padding:10px;border-radius:12px;box-shadow:0 8px 20px rgba(2,6,23,0.6);color:white;text-align:center}
.mini-on .mini-avatar{background:linear-gradient(135deg,#34d399,#06b6d4);width:48px;height:48px;border-radius:10px;display:inline-flex;align-items:center;justify-content:center;font-weight:700;margin-bottom:6px}
.mini-txt{font-size:12px;color:rgba(255,255,255,0.9)}
.mini-off{display:flex;align-items:center;gap:8px;color:rgba(255,255,255,0.9)}

/* Controls */
.vc-controls{position:fixed;left:50%;transform:translateX(-50%);bottom:22px;display:flex;gap:14px;align-items:center;padding:8px 14px;border-radius:40px;background:linear-gradient(180deg, rgba(2,6,23,0.6), rgba(2,6,23,0.45));box-shadow:0 10px 30px rgba(2,6,23,0.7);z-index:60}

/* When stage is fullscreen, ensure controls are positioned relative to viewport and visible */
.vc-video-stage:fullscreen .vc-controls,
.vc-video-stage:-webkit-full-screen .vc-controls {
  position:fixed;
  left:50%;
  bottom:36px;
  transform:translateX(-50%);
}
.control-btn{width:56px;height:56px;border-radius:999px;display:inline-flex;align-items:center;justify-content:center;background:rgba(255,255,255,0.03);border:1px solid rgba(255,255,255,0.04);color:white;font-size:18px;cursor:pointer;box-shadow:0 6px 18px rgba(2,6,23,0.5);transition:transform 180ms, background 180ms}
.control-btn:hover{transform:translateY(-4px)}
.control-btn.active{background:rgba(255,255,255,0.06)}
.control-btn.muted{background:var(--danger);color:white}
.control-btn.end{width:68px;height:68px;background:var(--danger);box-shadow:0 12px 30px rgba(239,68,68,0.25)}

.icon-btn{background:transparent;border:0;color:white;padding:8px;border-radius:8px;cursor:pointer}
.icon-btn:hover{background:rgba(255,255,255,0.04)}

/* Chat aside */
.vc-chat{background:var(--panel);color:#0b1220;border-radius:12px;padding:12px;box-shadow:0 6px 18px rgba(2,6,23,0.6)}
.chat-header{display:flex;justify-content:space-between;align-items:center}
.chat-body{padding:12px;color:var(--muted)}

/* Responsive rules */
@media (max-width:1000px){
  .vc-container{grid-template-columns:1fr;grid-template-rows:auto 1fr auto;}
  .vc-chat{order:3}
  .vc-sidebar{order:1}
  .vc-main{order:2}
  .vc-mini-video{right:12px;top:92px;width:110px}
  .vc-controls{bottom:12px}
  /* On small screens, keep controls centered and easier to tap */
  .control-btn{width:52px;height:52px}
  .vc-controls{padding:6px 10px;gap:10px}
}

@media (max-width:480px){
  .vc-avatar{width:48px;height:48px}
  .vc-avatar-doctor{font-size:20px}
  .vc-dummy-overlay{flex-direction:column;align-items:center;text-align:center;padding:14px}
  .vc-dummy-avatar{width:88px;height:88px;font-size:32px}
  .vc-video-stage{min-height:56vh}
  .control-btn{width:48px;height:48px}
  .control-btn.end{width:56px;height:56px}
  /* Mobile - pin controls above safe area */
  .vc-controls{left:50%;bottom:14px;transform:translateX(-50%)}
}

/* Utility: make audio page reuse same controls and fullscreen behaviors */
.vc-audio-stage{
  display:flex;
  align-items:center;
  justify-content:center;
  width:100%;
  min-height: calc(100vh - 120px); /* occupy most of the viewport to vertically center */
  padding:20px;
  box-sizing:border-box;
}

/* Call info block used in audio/video pages for aligned doctor details */
.vc-call-info{max-width:720px;margin:18px auto 0;color:#0b1220}
.vc-doctor-small{display:flex;gap:12px;align-items:center}
.vc-avatar-doctor-small{width:56px;height:56px;border-radius:10px;background:var(--accent);color:white;display:flex;align-items:center;justify-content:center;font-weight:700}
.vc-call-meta{display:flex;flex-wrap:wrap;gap:12px;margin-top:10px;color:var(--muted)}
.vc-status-row{display:flex;align-items:center;gap:8px}
.vc-status-row .dot{width:9px;height:9px;border-radius:99px;display:inline-block}
.vc-status-row .dot.available{background:#10b981}
.vc-exp{min-width:120px}
.vc-langs{flex:1}

@media (max-width:480px){
  .vc-call-info{padding:8px}
  .vc-doctor-small{flex-direction:row;align-items:center}
  .vc-avatar-doctor-small{width:48px;height:48px}
}

/* Audio card layout */
.vc-audio-card{
  display:flex;
  flex-direction:column;
  align-items:center;
  gap:12px;
  background:linear-gradient(180deg,#0b1220,#071023);
  padding:22px;
  border-radius:14px;
  color:white;
  box-shadow:0 24px 50px rgba(2,6,23,0.55);
  width:360px;
  max-width: calc(100% - 48px);
  margin:0; /* centered by parent flexbox */
}
.vc-audio-avatar{width:64px;height:64px;border-radius:12px;background:var(--accent);display:flex;align-items:center;justify-content:center;font-size:26px;font-weight:700}
.vc-audio-details{display:flex;flex-direction:column;align-items:center;text-align:center}
.vc-audio-title{display:flex;align-items:center;gap:8px}
.vc-name{font-size:18px;font-weight:700}
.vc-timer{color:var(--muted);font-size:13px}
.vc-audio-row{display:flex;flex-direction:column;gap:8px;align-items:center;color:#9aa4b2;margin-top:8px}
.vc-audio-card .vc-meta,.vc-audio-card .vc-small{color:#9aa4b2}
.vc-available-text{color:#9aa4b2}

@media (max-width:480px){
  .vc-audio-card{width:260px;padding:18px}
  .vc-audio-avatar{width:56px;height:56px}
  .vc-name{font-size:16px}
}

/* Prescription (medical inventory) popup */
.rx-overlay{position:fixed;inset:0;display:flex;align-items:center;justify-content:center;background:rgba(15,23,36,0.55);backdrop-filter:blur(4px);z-index:9999;padding:24px}
.rx-modal{background:#ffffff;color:#0b1220;width:100%;max-width:520px;border-radius:20px;box-shadow:0 30px 70px -12px rgba(15,23,36,0.55),0 4px 12px rgba(15,23,36,0.18);display:flex;flex-direction:column;padding:28px;animation:rxPop 260ms cubic-bezier(.4,.12,.2,1)}
.rx-modal h3{margin:0 0 18px;font-size:20px;font-weight:700;color:#111827;letter-spacing:.25px}
.rx-list{list-style:none;margin:0;padding:0;display:flex;flex-direction:column;gap:12px}
.rx-list li{display:flex;align-items:center;justify-content:space-between;background:#f9fafb;border:1px solid #e5e7eb;border-radius:12px;padding:10px 14px}
.rx-list li p{margin:0}
.rx-remove-btn{background:transparent;border:0;color:#dc2626;font-size:11px;font-weight:600;cursor:pointer;padding:2px 6px;border-radius:6px}
.rx-remove-btn:hover{background:rgba(220,38,38,0.06)}
.rx-actions{display:flex;gap:14px;margin-top:8px}
.rx-actions .btn{flex:1}
@keyframes rxPop{0%{transform:translateY(14px) scale(.96);opacity:0}100%{transform:translateY(0) scale(1);opacity:1}}

@media (max-width:600px){
  .rx-modal{padding:22px;border-radius:18px}
  .rx-overlay{padding:16px}
  .rx-modal h3{font-size:18px;margin-bottom:14px}
}

/* Inventory panel / table */
.inventory-panel{overflow:hidden;display:flex;flex-direction:column;padding:0;background:#fff;box-shadow:0 6px 18px rgba(2,6,23,0.6);max-height:calc(100vh - 140px)}
/* Adjust side panels to avoid being hidden behind bottom navigation and keep action buttons visible */
.vc-sidebar, .inventory-panel{max-height:calc(100vh - 220px);} /* increase subtraction to account for header + bottom nav */
.inventory-panel{overflow:hidden;}
.inventory-panel .inv-table-wrap{flex:1;min-height:0;}
.inv-header{padding:16px 16px 12px;border-bottom:1px solid #000;background:#ffffff;position:sticky;top:0;z-index:10}
.inv-header h3{margin:0 0 10px;font-size:15px;font-weight:600;color:#111827;letter-spacing:.2px}
.inv-header input{width:100%;border:1px solid #d1d5db;border-radius:8px;padding:8px 10px;font-size:13px;background:#f9fafb;outline:none;transition:border-color 160ms, background 160ms}
.inv-header input:focus{border-color:#2563eb;background:#fff;box-shadow:0 0 0 2px rgba(37,99,235,0.15)}
.inv-table-wrap{flex:1;overflow:auto;scrollbar-width:thin}
.vc-inventory-table{width:100%;border-collapse:collapse;font-size:13px;table-layout:fixed;background:#ffffff;color:#000}
.vc-inventory-table thead th{position:sticky;top:0;background:#f8fafc;color:#000;font-weight:600;font-size:11.5px;text-transform:uppercase;letter-spacing:.5px;padding:8px;border:1px solid #000}
.vc-inventory-table tbody td{padding:8px;border:1px solid #000;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;color:#000}
.vc-inventory-table tbody tr{cursor:pointer;transition:background 120ms;color:#000}
.vc-inventory-table tbody tr:hover{background:#f1f5f9}
.vc-inventory-table tbody tr.selected{background:#e0efff}
.vc-inventory-table th:nth-child(1), .vc-inventory-table td:nth-child(1){width:50%}
.vc-inventory-table th:nth-child(2), .vc-inventory-table td:nth-child(2){width:22%;text-align:center}
.vc-inventory-table th:nth-child(3), .vc-inventory-table td:nth-child(3){width:28%}
.status-badge{display:inline-block;padding:2px 8px;border-radius:14px;font-size:10px;font-weight:600;letter-spacing:.5px;border:1px solid #000;background:#e6f4ff;color:#000}
.status-badge.low{background:#fff3d6}
.status-badge.out{background:#ffe4e6}
.inv-footer{padding:12px 16px;border-top:1px solid #000;background:#ffffff;position:sticky;bottom:0}
.inv-footer button{font-size:13px;font-weight:600}
/* Scrollbar aesthetic (WebKit) */
.inv-table-wrap::-webkit-scrollbar{width:10px}
.inv-table-wrap::-webkit-scrollbar-track{background:#f1f5f9}
.inv-table-wrap::-webkit-scrollbar-thumb{background:#cbd5e1;border-radius:6px}
.inv-table-wrap::-webkit-scrollbar-thumb:hover{background:#94a3b8}

/* Popup large variant for full inventory selection */
.rx-overlay-local{position:absolute;inset:0;display:flex;align-items:center;justify-content:center;background:rgba(15,23,36,0.55);backdrop-filter:blur(4px);z-index:120;padding:24px;border-radius:12px}
.rx-modal-large{width:640px;max-width:100%;height:520px;max-height:100%;display:flex;flex-direction:column;background:#ffffff;border-radius:12px;box-shadow:0 30px 70px -12px rgba(15,23,36,0.55),0 4px 12px rgba(15,23,36,0.18);padding:24px}
.rx-table-container{flex:1;min-height:0;overflow:auto;border:1px solid #000;border-radius:10px;background:#ffffff;margin-bottom:14px}
.rx-table{width:100%;border-collapse:collapse;font-size:13px;color:#000;background:#ffffff}
.rx-table thead th{position:sticky;top:0;background:#f8fafc;color:#000;font-weight:600;font-size:11.5px;text-transform:uppercase;letter-spacing:.5px;padding:8px;border:1px solid #000}
.rx-table tbody td{padding:8px;border:1px solid #000;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}
.rx-table tbody tr{cursor:pointer;transition:background 120ms}
.rx-table tbody tr:hover{background:#f1f5f9}
.rx-table tbody tr.selected{background:#e0efff}
.rx-summary{font-size:12px;color:#111827;margin-bottom:12px}
